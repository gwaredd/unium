{"version":3,"sources":["actions/Logging.jsx","model/middleware/App.jsx","actions/App.jsx","actions/Tabs.jsx","components/app/AcNavBar.jsx","Utils.jsx","components/widgets/WidgetButton.jsx","components/widgets/WidgetTable.jsx","components/widgets/WidgetLink.jsx","components/widgets/OptionsTable.jsx","components/app/AcWidgets.jsx","components/widgets/Widget.jsx","components/app/AcPanel.jsx","components/app/AcGrid.jsx","components/app/AcTabs.jsx","components/dialogs/AcModalScreenshot.jsx","components/dialogs/AcModalConfirm.jsx","components/dialogs/AcModalAddTab.jsx","components/dialogs/AcModalAddPanel.jsx","components/dialogs/AcModalAddWidget.jsx","components/app/AcDialogs.jsx","components/app/AcOutput.jsx","model/reducers/App.jsx","model/reducers/Tabs.jsx","model/reducers/Panels.jsx","model/reducers/Widgets.jsx","model/middleware/Connection.jsx","model/Store.jsx","model/reducers/Output.jsx","App.js","index.js","actions/Connection.jsx"],"names":["Clear","type","Print","msg","payload","text","Info","Success","Warning","Error","__webpack_require__","d","__webpack_exports__","emptyConfig","app","tabs","byId","panels","widgets","store","next","action","api","getState","config","Axios","get","then","res","dispatch","data","Log","catch","err","Object","C_dev_unity_Unium_unium_Extras_alacarte_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","_","pick","json","JSON","stringify","post","toString","global","localStorage","removeItem","_action$payload","toast","info","success","warn","error","Connection","message","Confirm","title","question","callback","modal","AddWidget","widget","WidgetCreate","v","AcNavBar","onAddPanelConfirm","panel","_this$props","_this","props","curTab","state","keys","map","k","parseInt","id","length","max","objectSpread","tab","onScreenshot","onAddPanel","onSave","this","react_default","a","createElement","Navbar","bg","expand","Brand","Toggle","Collapse","Nav","className","Link","eventKey","onClick","lib_default","name","React","Component","connect","ownProps","Utils","WIDGET","DARK_COLOURS","#b80000","#db3e00","#fccb00","#008b02","#006b76","#1273de","#004dcf","#5300eb","Fetch","url","appConfig","uri","startsWith","WidgetButton","query","log","notify","Button","variant","style","backgroundColor","colour","color","textColour","block","WidgetTable","_getPrototypeOf2","classCallCheck","_len","arguments","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","setObject","keyMap","options","pickBy","omitBy","setState","headers","processData","filter","split","zipObject","isArray","isObject","i","include","o","n","0","fetchData","renderTable","Table","responsive","key","index","isString","_this$props2","isEditing","fetchOnStartup","_this$props3","Card","Header","Body","Alert","WidgetLink","window","open","focus","initialState","OptionsTable","onChangeFilter","target","value","onChangeFilterType","onChangeFetch","checked","_this2","Form","Group","as","Row","controlId","Label","column","sm","Col","InputGroup","Control","onChange","autoFocus","DropdownButton","componentClass","Dropdown","Item","onSelect","Text","offset","span","Check","label","Controls","button","link","table","Options","cardTarget","hover","monitor","component","dragIndex","getItem","hoverIndex","hoverBoundingRect","findDOMNode","getBoundingClientRect","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","y","console","moveWidget","Widget","onEditWidgetConfirm","Tabs","onEditWidget","e","stopPropagation","Actions","onRemoveWidget","nativeEvent","stopImmediatePropagation","toLowerCase","element","_this$props4","connectDragSource","connectDropTarget","paddingBottom","marginBottom","opacity","isDragging","position","onMouseDown","WidgetDropTarget","DropTarget","ItemTypes","dropTarget","WidgetDragSource","DragSource","beginDrag","dragSource","WidgetStore","AcPanel","onRemovePanel","onAddWidgetConfirm","onAddWidget","onToggleLock","edit","menu","_this$props5","panelWidgets","react_dnd_lib","backend","HTML5Backend","widgets_Widget","ResponsiveReactGridLayout","WidthProvider","Responsive","AcGrid","onLayoutChange","layout","layouts","tabId","activeTab","unlocked","panelList","assign","p","app_AcPanel","PureComponent","defaultProps","items","rowHeight","breakpoints","lg","md","xs","xxs","cols","AcTabs","onRemoveTab","remainingTabs","reject","selectTab","first","App","showTab","onAddTabConfirm","s","onSelectTab","createTab","fontSize","Tab","mountOnEnter","app_AcGrid","activeKey","values","AcModalScreenshot","onSuccess","loaded","onError","onCancel","src","Modal","show","animation","onHide","dialogClassName","closeButton","Title","alt","onLoad","Footer","AcModalConfirm","dialog","size","AcModalAddTab","onChangeName","onOK","preventDefault","onSubmit","initial_state","showColours","AcModalAddPanel","onChangeColour","c","hex","onShowColours","omit","Prepend","react_color_lib","width","onChangeComplete","DialogComponents","screenshot","confirm","addTab","addPanel","addWidget","AcModalAddWidget","onChangeQuery","onChangeLog","onChangeNotify","onChangeType","refs","ref","padding","height","AcDialogs","_this$props$app","react","EventListenerMode","capture","AcOutput","onLock","locked","onClear","onConnect","onDisconnect","onUpdateQuery","trim","onKeyDown","input","onToggle","output","document","body","addEventListener","onMouseUp","onMouseMove","dragOrigin","screenY","dragTimestamp","Date","now","delta","Math","removeEventListener","el","outputContent","scrollTop","scrollHeight","isConnected","connected","contents","timestamp","Badge","marginLeft","placeholder","server","location","host","protocol","ws","combineReducers","undefined","entry","defineProperty","t","panelID","toConsumableArray","find","w","push","newPanel","oldPanel","wid","_action$payload2","dragged","slice","splice","socket","onOpen","Action","onClose","onMessage","parse","toUpperCase","disconnect","WebSocket","onopen","onclose","onerror","onmessage","close","send","ConnectionMiddleware","gConnection","reducers","Panels","Widgets","moment","format","middleware","thunk","AppMiddleware","createStore","applyMiddleware","es","Store","app_AcNavBar","app_AcTabs","app_AcOutput","app_AcDialogs","react_toastify","autoClose","hideProgressBar","newestOnTop","closeOnClick","pauseOnHover","ReactDOM","render","src_App_App","getElementById","Connect","Disconnect","SetState","Send","q"],"mappings":"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","file":"static/js/main.f1794c8b.chunk.js","sourcesContent":["\nexport function Clear() {\n  return {\n    type    : \"LOG_CLEAR\"\n  }\n}\n\nexport function Print( msg ) {\n  return {\n    type    : \"LOG\",\n    payload : {\n      type  : 'default',\n      text  : msg\n    }\n  }\n}\n  \nexport function Info( msg ) {\n  return {\n    type    : \"LOG\",\n    payload : {\n      type  : 'info',\n      text  : msg\n    }\n  }\n}\n\nexport function Success( msg ) {\n  return {\n    type    : \"LOG\",\n    payload : {\n      type  : 'success',\n      text  : msg\n    }\n  }\n}\n\nexport function Warning( msg ) {\n  return {\n    type    : \"LOG\",\n    payload : {\n      type  : 'warning',\n      text  : msg\n    }\n  }\n}\n\nexport function Error( msg ) {\n  return {\n    type    : \"LOG\",\n    payload : {\n      type  : 'danger',\n      text  : msg\n    }\n  }\n}\n","//-------------------------------------------------------------------------------\n// websocket connection to game as redux middleware\n\nimport Axios from 'axios'\nimport { toast } from 'react-toastify'\nimport _ from 'lodash'\n\nimport * as Connection from '../../actions/Connection'\nimport * as Log from '../../actions/Logging'\n\nconst persistentConfig = '/file/persistent/alacarte.json'\nconst streamingConfig = '/file/streaming/alacarte.json'\nconst localStorageKey = 'unium'\n\nconst emptyConfig = {\n  app: {},\n  tabs: { byId: {}},\n  panels: { byId: {}},\n  widgets: { byId: {}},\n}\n\n\n//-------------------------------------------------------------------------------\n// redux middleware\n\nexport default (function(){ \n\n  return store => next => action => {\n\n    switch( action.type ) {\n\n      //-------------------------------------------------------------------------------\n      // load app settings\n\n      case 'APP_LOAD': {\n\n        const state = store.getState()\n        const { api } = state.app.config\n\n        Axios.get( api + persistentConfig )\n          .then( (res) => {\n            store.dispatch( { type: 'CONFIG_IMPORT', payload: res.data } )\n            store.dispatch( Log.Success( 'Config loaded from persistent storage' ) )\n          })\n          .catch( (err) => {\n\n            // failed to load from persistent storage, try streaming instead\n\n            Axios.get( api + streamingConfig )\n              .then( (res) => {\n                store.dispatch( { type: 'CONFIG_IMPORT', payload: res.data } )\n                store.dispatch( Log.Success( 'Config loaded from streaming assets' ) )\n              })\n              .catch( (err) => {\n                store.dispatch( Log.Warning( 'Failed to fetch a config file from the game' ) )\n              })\n          })\n\n        return\n      }\n\n\n      //-------------------------------------------------------------------------------\n\n      case 'APP_SAVE': {\n\n        const data = { ...store.getState() }\n        const { api } = data.app.config\n\n        \n        delete data[ 'output' ]\n        data.app = _.pick( data.app, 'settings' )\n        const json = JSON.stringify( data )\n\n        Axios\n          .post( api + persistentConfig, json )\n          .then ( (res) => store.dispatch( Log.Success( 'Config saved to persistent data' ) ) )\n          .catch( (err) => store.dispatch( Log.Error( 'Failed to save config: ' + err.toString() ) ) )\n    \n        return\n      }\n\n      //-------------------------------------------------------------------------------\n\n      case 'APP_DELETE': {\n\n        global.localStorage.removeItem( localStorageKey )\n\n        store.dispatch( { type: 'CONFIG_IMPORT', payload: emptyConfig } )\n        store.dispatch( Log.Success( 'Config removed' ) )\n          \n        return\n      }\n      \n      \n      //-------------------------------------------------------------------------------\n      // toast important app log messages\n\n      case 'LOG': {\n\n        const { type, text } = action.payload\n\n        switch( type ) {\n          case 'info':    toast.info( text ); break\n          case 'success': toast.success( text ); break\n          case 'warning': toast.warn( text ); break\n          case 'danger':  toast.error( text ); break\n          default: break\n        }\n        \n        break\n      }\n\n\n      //-------------------------------------------------------------------------------\n      // handle connected to game state\n\n      case 'CON_CONNECTED': {\n\n        if( action.payload ) {\n          store.dispatch( Log.Print( \"Connected\" ) )\n          store.dispatch( Connection.Send( 'debug', '/bind/events.debug' ) ) // bind to debug messages\n        } else {\n          store.dispatch( Log.Print( \"Disconnected\" ) )\n        }\n        break\n      }\n\n\n      //-------------------------------------------------------------------------------\n      // handle debug output from game\n\n      case 'SOCK_DEBUG': {\n\n        const msg = action.payload\n\n        if( \"info\" in msg ) {\n          store.dispatch( Log.Info( \"Debug messages bound\" ) )\n        } else if( \"error\" in msg ) {\n          store.dispatch( Log.Error( msg.error ) )\n        } else {\n          store.dispatch( Log.Print( msg.data.message ) )\n        }\n\n        break\n      }\n\n      default: {\n        break\n      }\n    }\n\n    return next( action )\n  }\n\n})()\n\n","//-------------------------------------------------------------------------------\n// dialogs\n\nexport function Screenshot() {\n  return {\n    type    : \"APP_DAILOG_SHOW\",\n    payload : {\n      modal     : 'screenshot',\n    }\n  }\n}\n\nexport function Save() {\n  return {\n    type    : \"APP_SAVE\"\n  }\n}\n\nexport function Delete() {\n  return {\n    type    : \"APP_DELETE\"\n  }\n}\n  \nexport function Confirm( title, question, callback, data ) {\n  return {\n    type    : \"APP_DAILOG_SHOW\",\n    payload : {\n      modal     : 'confirm',\n      title     : title,\n      question  : question,\n      callback  : callback,\n      data      : data\n    }\n  }\n}\n\nexport function AddTab( callback ) {\n  return {\n    type    : \"APP_DAILOG_SHOW\",\n    payload : {\n      modal     : 'addTab',\n      callback  : callback\n    }\n  }\n}\n\nexport function AddPanel( callback ) {\n  return {\n    type    : \"APP_DAILOG_SHOW\",\n    payload : {\n      modal     : 'addPanel',\n      callback  : callback\n    }\n  }\n}\n\nexport function EditPanel( id ) {\n  return {\n    type    : \"APP_PANEL_STATE\",\n    payload : {\n      edit : id\n    }\n  }\n}\n\nexport function MoveWidget( id, dragIndex, hoverIndex ) {\n  return {\n    type    : \"WIDGET_MOVE\",\n    payload : {\n      id:         id,\n      dragIndex:  dragIndex,\n      hoverIndex: hoverIndex\n    }\n  }\n}\n\nexport function AddWidget( callback, widget ) {\n  return {\n    type    : \"APP_DAILOG_SHOW\",\n    payload : {\n      modal     : 'addWidget',\n      callback  : callback,\n      widget    : widget\n    }\n  }\n}\n\nexport function CancelDialog() {\n  return {\n    type: \"APP_DIALOG_CANCEL\"\n  }\n}\n\nexport function ChangeConfig( settings ) {\n  return {\n    type: \"APP_CONFIG\",\n    payload: settings\n  }\n}\n","//-------------------------------------------------------------------------------\n\nexport function TabCreate( id, name ) {\n  return {\n    type: \"TAB_CREATE\",\n    payload: {\n      id      : id,\n      name    : name,\n      layout  : {}\n    }\n  }\n}\n\nexport function TabRemove( id, showTab ) {\n  return {\n    type    : \"TAB_REMOVE\",\n    payload : {\n      id      : id,\n      showTab : showTab\n    }\n  }\n}\n\nexport function TabSelect( id ) {\n  return {\n    type: \"TAB_SELECT\",\n    payload: {\n      id: id\n    }\n  }\n}\n\nexport function TabLayout( id, layout ) {\n  return {\n    type: \"TAB_LAYOUT\",\n    payload: {\n      id: id,\n      layout: layout\n    }\n  }\n}\n\n//-------------------------------------------------------------------------------\n\nexport function PanelCreate( panel ) {\n  return {\n    type: \"PANEL_CREATE\",\n    payload: {...panel, tab: parseInt( panel.tab )}\n  }\n}\n\nexport function PanelRemove( id ) {\n  return {\n    type    : \"PANEL_REMOVE\",\n    payload : {\n      id    : id\n    }\n  }  \n}\n\n//-------------------------------------------------------------------------------\n\nexport function WidgetCreate( v ) {\n  return {\n    type    : \"WIDGET_CREATE\",\n    payload : v\n  }  \n}\n\n\nexport function WidgetRemove( id, panel ) {\n  return {\n    type    : \"WIDGET_REMOVE\",\n    payload : {\n      id    : id,\n      panel : panel,\n    }\n  }  \n}\n\n","//-------------------------------------------------------------------------------\n\nimport React from 'react'\nimport FontAwesome from 'react-fontawesome'\nimport _ from 'lodash'\n\nimport * as Actions from '../../actions/App'\nimport * as ActionsTab from '../../actions/Tabs'\n\nimport { connect } from 'react-redux'\n\nimport { \n  Navbar,\n  Nav\n} from 'react-bootstrap'\n\n\n//-------------------------------------------------------------------------------\n\nclass AcNavBar extends React.Component {\n\n  onAddPanelConfirm = ( d ) => {\n\n    const { dispatch, panels, tabs } = this.props\n    const { curTab } = tabs.state\n\n    const keys    = _.map( _.keys( panels.byId ), (k) => parseInt(k) )\n    const id      = keys.length === 0 ? 1 : _.max( keys ) + 1    \n    const payload = {...d, id: id, tab: curTab }\n\n    dispatch( ActionsTab.PanelCreate( payload ) )\n  }\n\n  onScreenshot  = () => this.props.dispatch( Actions.Screenshot() )\n  onAddPanel    = () => this.props.dispatch( Actions.AddPanel( this.onAddPanelConfirm ) )\n  onSave        = () => this.props.dispatch( Actions.Save() )\n\n\n  render() {\n\n    const { curTab } = this.props.tabs.state\n\n    return (\n      <Navbar bg='light' expand='lg'>\n        <Navbar.Brand>\n          Unium:  La Carte\n        </Navbar.Brand>\n        <Navbar.Toggle />\n        <Navbar.Collapse>\n          <Nav  className=\"justify-content-end\">\n            <Nav.Link eventKey={3} onClick={this.onSave}>\n              <FontAwesome name='floppy-o' />\n            </Nav.Link>\n            <Nav.Link eventKey={3} onClick={this.onScreenshot}>\n              <FontAwesome name='camera' />\n            </Nav.Link>\n            { curTab !== -1 && (\n              <Nav.Link eventKey={4} onClick={this.onAddPanel}>\n                <FontAwesome name='plus' />\n              </Nav.Link>\n            )}\n          </Nav>\n        </Navbar.Collapse>\n      </Navbar>\n    )\n  }\n}\n\nconst mapStateToProps = ( state, ownProps ) => {\n  return {\n    panels : state.panels,\n    tabs   : state.tabs\n  }\n}\n\nexport default connect( mapStateToProps )( AcNavBar );\n\n","import Axios from 'axios'\n\nexport default {\n\n  WIDGET: 'widget',\n\n  DARK_COLOURS: {\n    '#b80000': true,\n    '#db3e00': true,\n    '#fccb00': true,\n    '#008b02': true,\n    '#006b76': true,\n    '#1273de': true,\n    '#004dcf': true,\n    '#5300eb': true,\n  },\n\n  Fetch: (url, appConfig) => {\n    const uri = url.startsWith( \"http\" ) ? url : appConfig.api + url\n    return Axios.get( uri )\n  }\n}\n\n","//-------------------------------------------------------------------------------\n\nimport React from 'react'\n\nimport { Button } from 'react-bootstrap'\n\nimport Utils from '../../Utils'\nimport * as Log from '../../actions/Logging'\n\n\n//-------------------------------------------------------------------------------\n\nexport default class WidgetButton extends React.Component {\n  \n\n  //-------------------------------------------------------------------------------\n\n  onClick = () => {\n    \n    const { widget, dispatch, appConfig } = this.props\n  \n    if( !(\"query\" in widget ) ) {\n      dispatch( Log.Warning( \"Widget '\" + widget.name + \"'has no query\" ) )\n      return\n    }\n\n    Utils.Fetch( widget.query, appConfig )\n    \n      .then( (res) => {\n  \n        if( 'log' in widget && widget.log ) {\n          dispatch( Log.Print( '[' + widget.name + ']' + JSON.stringify( res.data, null, 2 ) ) )\n        }\n  \n        if( 'notify' in widget && widget.notify ) {\n          dispatch( Log.Success( widget.name + ' Success' ) )\n        }\n  \n      })\n  \n      .catch( (err) => {\n        dispatch( Log.Error( err.toString() ) )\n      })\n  \n  }\n  \n  //-------------------------------------------------------------------------------\n  \n  render() {\n\n    const { widget } = this.props\n\n    return (\n      <Button\n        variant=\"default\"\n        className=\"acWidget\"\n        style={{ backgroundColor: widget.colour, color: widget.textColour }}\n        block\n        onClick={this.onClick}>\n        { widget.name }\n      </Button>\n    )\n  }\n}\n\n","//-------------------------------------------------------------------------------\n\nimport _ from 'lodash'\nimport React from 'react'\nimport FontAwesome from 'react-fontawesome'\n\nimport {\n  Table,\n  Alert,\n  Card\n\n} from 'react-bootstrap'\n\n\nimport Utils from '../../Utils'\nimport * as Log from '../../actions/Logging'\n\n\n//-------------------------------------------------------------------------------\n\nexport default class WidgetTable extends React.Component {\n  constructor( ...args ) {\n    super( ...args )\n    this.state = {\n      error:   null,\n      data:    null,\n      headers: null\n    }\n  } \n\n\n  //-------------------------------------------------------------------------------\n\n  setObject = (data,keyMap) => {\n\n    const { widget } = this.props\n\n    if( keyMap != null ) {\n      if( widget.options.type === 'Include' ) {\n        data = _.pickBy( data, (v,k) => k in keyMap )\n      } else {\n        data = _.omitBy( data, (v,k) => k in keyMap )\n      }\n    }\n\n    this.setState({ data:data, headers: null })\n  }\n\n  processData = (data) => {\n\n    const { widget } = this.props\n\n    let keyMap = null\n\n    if( widget.options.filter !== \"\" ) {\n      const keys = widget.options.filter.split( /\\s*,\\s*/ )\n      keyMap = _.zipObject( keys, _.map( keys, () => true ) )\n    }\n\n    // arrays\n\n    if( _.isArray( data ) ) {\n    \n      if( data.length === 1 ) {\n        this.setObject( data[0], keyMap )\n        return\n      }\n\n      // data\n\n      if( _.isObject( data[0] ) === false ) {\n        const keys = _.map( data, (k,i) => i )\n        this.setState( { data: _.zipObject( keys, data ) } )\n        return\n      }\n\n      let headers = []\n\n      if( keyMap === null ) {\n\n        headers = _.keys( data[0] )\n\n      } else {\n\n        const include = widget.options.type === 'Include'        \n\n        headers = _.keys( keyMap )\n        data    = _.map( data, (v,k) => include ? _.pickBy( v, (o,n) => n in keyMap ): _.omitBy( v, (o,n) => n in keyMap ) )\n          \n      }\n      \n      this.setState({ headers: headers, data: data })\n      \n      \n    // objects\n    \n    } else if( _.isObject( data ) ) {\n\n      this.setObject( data, keyMap )\n\n\n    // plain old data\n      \n    } else {\n\n      this.setState({data:{0:JSON.stringify( data ) }})\n\n    }\n  }\n\n\n  //-------------------------------------------------------------------------------\n\n  fetchData = () => {\n\n    const { widget, dispatch, appConfig } = this.props\n\n    if( !(\"query\" in widget ) ) {\n      dispatch( Log.Warning( \"Widget '\" + widget.name + \"'has no query\" ) )\n      return\n    }\n  \n    Utils.Fetch( widget.query, appConfig )\n  \n      .then( (res) => {\n  \n        if( 'log' in widget && widget.log ) {\n          dispatch( Log.Print( '[' + widget.name + ']' + JSON.stringify( res.data, null, 2 ) ) )\n        }\n  \n        if( 'notify' in widget && widget.notify ) {\n          dispatch( Log.Success( widget.name + ' Success' ) )\n        }\n\n        this.processData( res.data )\n\n      })\n  \n      .catch( (err) => {\n        dispatch( Log.Error( err.toString() ) )\n        this.setState({ error: err.toString(), data: null })\n      })\n    \n  }\n\n\n  //-------------------------------------------------------------------------------\n\n  componentWillMount() {\n\n    const { widget, isEditing } = this.props\n\n    if( !isEditing && widget.options.fetchOnStartup ) {\n      this.fetchData()\n    }\n  }\n\n\n  //-------------------------------------------------------------------------------\n\n  renderTable = () => {\n\n    // with headers\n\n    if( this.state.headers ) {\n\n      const { headers } = this.state\n\n      return (\n        <Table responsive>\n          <thead>\n            <tr>\n              { _.map( headers, (v,k) => <th key={k}>{v}</th> ) }\n            </tr>\n          </thead>\n          <tbody>\n          {\n            _.map( this.state.data, (v,index) => \n              <tr key={index}>\n                {\n                  _.map( headers, (key,i) => <td key={i}>{  _.isString( v[key] ) ? v[key] : JSON.stringify( v[key] )  }</td> )\n                }\n              </tr>\n            )\n          }\n          </tbody>      \n        </Table>\n      )\n    }\n    \n    // without headers\n\n    return (\n      <Table responsive>\n        <tbody>\n        {\n          _.map( this.state.data, (v,k) => {\n            return (\n              <tr key={k}>\n                <td>{ k }</td>\n                <td>{ _.isString( v ) ? v : JSON.stringify(v) }</td>\n              </tr>\n            )\n          })\n        }\n        </tbody>\n      </Table>\n    )\n\n  }\n  \n  \n  //-------------------------------------------------------------------------------\n\n  render() {\n\n    const { widget, isEditing } = this.props\n\n    return (\n      <Card>\n        <Card.Header\n          style={{\n            backgroundColor: widget.colour,\n            color: widget.textColour\n          }}\n        >\n          { widget.name }\n          { !isEditing && (\n            <div className='pull-right'>\n              <FontAwesome name='refresh' onClick={this.fetchData} />\n            </div>\n          )}\n        </Card.Header>\n        <Card.Body>\n          { this.state.error != null && (\n            <Alert variant=\"danger\">\n              Failed to fetch data<br/>\n              { this.state.error }\n            </Alert>\n          )}\n\n          { this.state.error === null && this.state.data === null && (\n            <Alert variant=\"info\">\n              Data not fetched yet\n            </Alert>\n          )}\n\n          { this.state.data != null && this.renderTable() }\n        </Card.Body>\n      </Card>\n    )\n  }\n\n}\n","//-------------------------------------------------------------------------------\n\nimport React from 'react'\nimport FontAwesome from 'react-fontawesome'\nimport * as Log from '../../actions/Logging'\n\nimport { Button } from 'react-bootstrap'\n\n\n//-------------------------------------------------------------------------------\n\nexport default class WidgetLink extends React.Component {\n\n  //-------------------------------------------------------------------------------\n\n  onClick = () => {\n    \n    const { widget, dispatch, appConfig } = this.props\n  \n    if( !(\"query\" in widget) ) {\n      dispatch( Log.Warning( \"Widget '\" + widget.name + \"'has no query\" ) )\n      return\n    }\n\n    const url = widget.query.startsWith( \"http\" ) ? widget.query : appConfig.api + widget.query\n    \n    const win = window.open( url, '_blank' )\n    win.focus();\n\n  }\n  \n  //-------------------------------------------------------------------------------\n  \n  render() {\n\n    const { widget, isEditing } = this.props\n\n    return (\n      <Button\n        variant=\"default\"\n        className=\"acWidget\"\n        style={{ backgroundColor: widget.colour, color: widget.textColour }}\n        block\n        onClick={this.onClick}>\n        { widget.name }\n        { !isEditing && (\n            <div className='pull-right'>\n              <FontAwesome name='external-link' />\n            </div>\n          )}\n        \n      </Button>\n    )\n  }\n}\n\n","\nimport React from 'react'\n\nimport {\n  Form,\n  Col,\n  Row,\n  Dropdown,\n  DropdownButton,\n  InputGroup\n} from 'react-bootstrap'\n\nconst initialState = {\n  filter:         \"\",\n  type:           \"Include\",\n  fetchOnStartup: true,\n}\n\n\nexport default class OptionsTable extends React.Component {\n\n  constructor( ...args ) {\n    super( ...args )\n    const { options } = this.props\n    this.state = { ...initialState, ...options }\n  }\n\n  onChangeFilter     = (v) => this.setState( { filter: v.target.value } )\n  onChangeFilterType = (v) => this.setState( { type:   v } )\n  onChangeFetch      = (v) => this.setState( { fetchOnStartup: v.target.checked } )\n  \n  \n  //-------------------------------------------------------------------------------\n  \n  render() {\n\n    return (\n      <div>\n\n        <Form.Group as={Row} controlId=\"formFilter\">\n          <Form.Label column sm='2'>\n            Filter\n          </Form.Label>\n          <Col sm={10}>\n            <InputGroup>\n              <Form.Control\n                type=\"text\"\n                value={this.state.filter}\n                onChange={this.onChangeFilter}\n                autoFocus={true}\n                />\n              <DropdownButton componentClass={InputGroup.Button} id=\"formFilterType\" title={this.state.type}>\n                <Dropdown.Item key=\"1\" onSelect={()=>this.onChangeFilterType('Include')}>Include</Dropdown.Item>\n                <Dropdown.Item key=\"2\" onSelect={()=>this.onChangeFilterType('Exclude')}>Exclude</Dropdown.Item>\n              </DropdownButton>\n            </InputGroup>\n            <Form.Text className=\"text-muted\">\n              Comma separated list of key names (or leave blank to ignore)\n            </Form.Text>\n          </Col>\n        </Form.Group>\n\n        <Form.Group>\n          <Col sm={{offset:2, span:10}}>\n            <Form.Check\n              checked={this.state.fetchOnStartup}\n              onChange={this.onChangeFetch}\n              label='Fetch on start up'\n            />\n          </Col>\n        </Form.Group>\n\n      </div>\n    )\n  }\n\n}\n","import WidgetButton from '../widgets/WidgetButton'\nimport WidgetTable from '../widgets/WidgetTable'\nimport WidgetLink from '../widgets/WidgetLink'\nimport OptionsTable from '../widgets/OptionsTable'\n\nexport const Controls = {\n  button: WidgetButton,\n  link:   WidgetLink,\n  table:  WidgetTable,\n}\n\nexport const Options = {\n  table:  OptionsTable,\n}\n\n","//-------------------------------------------------------------------------------\n\nimport React from 'react'\nimport { connect } from 'react-redux'\n\n// drag and drop\nimport { findDOMNode } from 'react-dom'\nimport { DragSource, DropTarget } from 'react-dnd'\nimport ItemTypes from '../../Utils'\n\n// widgets\nimport FontAwesome from 'react-fontawesome'\nimport { Controls } from '../app/AcWidgets'\n\n// actions\nimport * as Actions from '../../actions/App'\nimport * as Tabs from '../../actions/Tabs'\n\n\n//-------------------------------------------------------------------------------\n// dragging\n\nconst cardSource = {\n  beginDrag(props) {\n    return {\n      id:    props.id,\n      index: props.index,\n    }\n  },\n}\n\nconst cardTarget = {\n\n  hover( props, monitor, component ) {\n\n    const dragIndex = monitor.getItem().index\n    const hoverIndex = props.index\n\n    // Don't replace items with themselves\n\n    if (dragIndex  === hoverIndex) {\n      return\n    }\n\n\n    // Determine rectangle on screen\n    const hoverBoundingRect = findDOMNode( component ).getBoundingClientRect()\n\n    // Get vertical middle\n    const hoverMiddleY = ( hoverBoundingRect.bottom - hoverBoundingRect.top ) / 2\n\n    // Determine mouse position\n    const clientOffset = monitor.getClientOffset()\n\n    // Get pixels to the top\n    const hoverClientY = clientOffset.y - hoverBoundingRect.top\n\n    // Only perform the move when the mouse has crossed half of the items height\n    // When dragging downwards, only move when the cursor is below 50%\n    // When dragging upwards, only move when the cursor is above 50%\n\n    // Dragging downwards\n    if( dragIndex < hoverIndex && hoverClientY < hoverMiddleY ) {\n      return\n    }\n\n    // Dragging upwards\n    if( dragIndex > hoverIndex && hoverClientY > hoverMiddleY ) {\n      return\n    }\n\n    console.log( )\n\n    // Time to actually perform the action\n    props.moveWidget( dragIndex, hoverIndex )\n\n    // Note: we're mutating the monitor item here!\n    // Generally it's better to avoid mutations,\n    // but it's good here for the sake of performance\n    // to avoid expensive index searches.\n    \n    monitor.getItem().index = hoverIndex\n  },\n}\n\n//-------------------------------------------------------------------------------\n\nclass Widget extends React.Component {\n  \n\n  //-------------------------------------------------------------------------------\n  //  edit\n\n  onEditWidgetConfirm = ( widget ) => {\n    this.props.dispatch( Tabs.WidgetCreate( widget ))\n  }\n\n  onEditWidget = (e) => {\n\n    e.stopPropagation()\n    \n    const { dispatch, id, widgets } = this.props\n    const widget = widgets.byId[ id ]\n    \n    dispatch( Actions.AddWidget( this.onEditWidgetConfirm, widget ) )\n  }\n  \n\n  //-------------------------------------------------------------------------------\n  // remove\n\n  onRemoveWidget = (e) => {\n\n    e.stopPropagation()\n    e.nativeEvent.stopImmediatePropagation()\n\n    const { dispatch, id, widgets } = this.props\n    const widget = widgets.byId[ id ]\n    \n    dispatch( Actions.Confirm(\n      'Remove Widget',\n      \"Are you sure you want to remove '\" + widget.name + \"'\",\n      () => dispatch( Tabs.WidgetRemove( widget.id, widget.panel ) )\n    ))\n\n  }\n\n  //-------------------------------------------------------------------------------\n  // render\n\n  render() {\n\n    const { isEditing, widget } = this.props\n    \n    const component = Controls[ widget.type.toLowerCase() ]\n    const element = React.createElement( component, {\n      widget: widget,\n      dispatch: this.props.dispatch,\n      appConfig: this.props.appConfig,\n      isEditing: isEditing\n    })\n\n    if( !isEditing ) {\n      return element;\n    }\n\n    // editing ...\n\n    const { connectDragSource, connectDropTarget, isDragging } = this.props\n\n    const style = {\n      paddingBottom: '0px',\n      marginBottom:  '5px',\n      opacity:       isDragging ? 0: 1,\n      position:     'relative'\n    }\n\n    \n    const html = (\n      <div style={style} onMouseDown={(e)=>{e.stopPropagation()}}>\n        {element}\n        <div className='acEdit' style={{color: widget.textColour}}>\n            <FontAwesome className='acPanelIcon' name='pencil' onClick={this.onEditWidget} />\n            &nbsp;\n            <FontAwesome className='acPanelIcon' name='times' onClick={this.onRemoveWidget} />\n          </div>\n      </div>\n    )\n\n    return connectDragSource( connectDropTarget( html ) )\n  }\n}\n\nconst mapStateToProps = ( state, ownProps ) => {\n  return {\n    widgets : state.widgets\n  }\n}\n\nconst WidgetDropTarget = DropTarget( ItemTypes.WIDGET, cardTarget, connect => ({\n    connectDropTarget: connect.dropTarget(),\n  }))( Widget );\n\nconst WidgetDragSource = DragSource( ItemTypes.WIDGET, cardSource, (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    isDragging:        monitor.isDragging(),\n  }))( WidgetDropTarget )\n\nconst WidgetStore = connect( mapStateToProps )( WidgetDragSource );\n\nexport default WidgetStore;\n\n","//-------------------------------------------------------------------------------\n\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport FontAwesome from 'react-fontawesome'\n\nimport { DndProvider } from 'react-dnd'\nimport HTML5Backend from 'react-dnd-html5-backend'\n\nimport Widget from '../widgets/Widget'\n\nimport _ from 'lodash';\nimport * as Actions from '../../actions/App'\nimport * as Tabs from '../../actions/Tabs'\n\n//-------------------------------------------------------------------------------\n\nclass AcPanel extends React.Component {\n\n  //-------------------------------------------------------------------------------\n\n  onRemovePanel = () => {\n\n    const { panel, dispatch } = this.props\n\n    dispatch( Actions.Confirm(\n      'Remove Panel',\n      \"Are you sure you want to remove '\" + panel.name + \"'\",\n      () => dispatch( Tabs.PanelRemove( panel.id ) )\n    ))\n  }\n\n  onAddWidgetConfirm = ( v ) => {\n    const { widgets, panel, dispatch } = this.props\n    const keys  = _.map( _.keys( widgets.byId ), (k) => parseInt(k) )\n    const id    = keys.length === 0 ? 1 : _.max( keys ) + 1\n    dispatch( Tabs.WidgetCreate( { ...v, id: id, panel: panel.id, tab: panel.tab } ))\n  }\n\n  onAddWidget = () => {\n    this.props.dispatch( Actions.AddWidget( this.onAddWidgetConfirm ) )\n  }\n\n  onToggleLock = () => {\n    const { panel, isEditing, dispatch } = this.props\n    dispatch( Actions.EditPanel( isEditing ? 0 : panel.id ) )\n  }\n\n  moveWidget = ( dragIndex, hoverIndex ) => {\n    const { panel, dispatch } = this.props\n    dispatch( Actions.MoveWidget( panel.id, dragIndex, hoverIndex ) )\n  }\n    \n\n  //-------------------------------------------------------------------------------\n\n  render() {\n\n    const { widgets, app, panel, isEditing } = this.props\n\n    let menu;\n\n    if( !isEditing ) {\n      menu = <FontAwesome className='acPanelIcon' name='lock'  onClick={this.onToggleLock} />\n    } else {\n      menu = (\n        <span>\n          <FontAwesome className='acPanelIcon' name='plus' onClick={this.onAddWidget} /> &nbsp;\n          <FontAwesome className='acPanelIcon' name='trash-o' onClick={this.onRemovePanel} /> &nbsp;\n          <FontAwesome className='acPanelIcon' name='unlock' onClick={this.onToggleLock}  />\n        </span>\n      )\n    }\n\n    const panelWidgets = panel.widgets.map( (id) => widgets.byId[id] )\n\n    return (\n      <DndProvider backend={HTML5Backend}>\n        <div className=\"acPanel card\">\n          <div className=\"card-header card-title\" style={{backgroundColor: panel.colour, color: panel.textColour }}>\n            { panel.name }\n            <div className='pull-right'>\n              { menu }\n            </div>s\n          </div>\n          <div className=\"card-body\">\n            { panelWidgets.map( (widget,i) => {\n              return (\n                <Widget\n                  key={`wid${widget.id}`}\n                  id={widget.id}\n                  index={i}\n                  appConfig={app.config}\n                  widget={widget}\n                  isEditing={isEditing}\n                  moveWidget={this.moveWidget}\n                />\n              )\n            })}\n          </div>\n        </div>\n      </DndProvider>\n    )\n  }\n}\n\nconst mapStateToProps = ( state, ownProps ) => {\n  return {\n    widgets : state.widgets,\n    app     : state.app\n  }\n}\n\nexport default connect( mapStateToProps )( AcPanel )\n","//-------------------------------------------------------------------------------\n\nimport _ from 'lodash'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Responsive, WidthProvider } from 'react-grid-layout'\n\nimport AcPanel from './AcPanel'\n\nimport 'react-grid-layout/css/styles.css'\nimport 'react-resizable/css/styles.css'\n\nimport * as Tabs from '../../actions/Tabs'\n\n\nconst ResponsiveReactGridLayout = WidthProvider( Responsive )\n\n\n//-------------------------------------------------------------------------------\n\nclass AcGrid extends React.PureComponent {\n\n  static defaultProps = {\n    className   : \"layout\",\n    items       : 1,\n    rowHeight   : 150,\n    breakpoints : { lg: 1200, md: 996, sm: 768, xs: 480, xxs: 0 },\n    cols        : { lg: 6, md: 4, sm: 2, xs: 1, xxs: 1 },\n  }\n\n  onLayoutChange = ( layout, layouts ) => {\n    const { tabId, dispatch }  = this.props\n    dispatch( Tabs.TabLayout( tabId, layouts ) )\n  }\n\n  render() {\n\n    const { panels, tabId, layout }  = this.props\n\n    const activeTab = parseInt( tabId )\n    const unlocked  = \"edit\" in panels.state ? panels.state.edit : 0\n    const panelList = _.filter( panels.byId, (v) => v.tab === activeTab )\n    \n    return (\n      <ResponsiveReactGridLayout\n        layouts={layout}\n        onLayoutChange={this.onLayoutChange}\n        {...this.props}\n      >\n      {\n        _.map( panelList, (p,i) =>\n          <div key={i}>\n            <AcPanel panel={p} isEditing={p.id === unlocked} />\n          </div>\n        )\n      }\n      </ResponsiveReactGridLayout>\n    )\n  }\n}\n\nconst mapStateToProps = ( state, ownProps ) => {\n  return {\n    panels: state.panels\n  }\n}\n\nexport default connect( mapStateToProps )( AcGrid );\n\n","//-------------------------------------------------------------------------------\n\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Tabs, Tab } from 'react-bootstrap'\nimport FontAwesome from 'react-fontawesome'\nimport _ from 'lodash'\n\nimport AcGrid from './AcGrid'\n\nimport * as App from '../../actions/App'\nimport * as Actions from '../../actions/Tabs'\n\n\n//-------------------------------------------------------------------------------\n\nclass AcTabs extends React.Component {\n\n  onRemoveTab = () => {\n    \n    const { dispatch, tabs } = this.props\n    const curTab = tabs.state.curTab\n    const tab = tabs.byId[ curTab ]\n\n    const keys = Object.keys( tabs.byId )\n    const remainingTabs = _.reject( keys, (id) => id === `${curTab}` )\n    const selectTab = remainingTabs.length > 0 ? parseInt( _.first( remainingTabs ) ) : -1\n\n    dispatch( App.Confirm(\n      'Remove Tab',\n      \"Are you sure you want to remove '\" + tab.name + \"'\",\n      (id) => dispatch( Actions.TabRemove( id, selectTab ) ),\n      curTab\n    ))\n  }\n\n  //-------------------------------------------------------------------------------\n\n  onAddTabConfirm = ( s ) => {\n    \n    const { dispatch, tabs } = this.props\n    \n    const keys  = _.map( _.keys( tabs.byId ), (k) => parseInt(k) )\n    const id    = keys.length === 0 ? 1 : _.max( keys ) + 1\n        \n    dispatch( Actions.TabCreate( id, s.name ) )\n  }\n    \n  onSelectTab = (id) => {\n\n    const { dispatch } = this.props\n    const tabId = parseInt( id, 10 )\n\n    if( tabId === -1 ) {\n      dispatch( App.AddTab( this.onAddTabConfirm ) )\n    } else {\n      dispatch( Actions.TabSelect( tabId ) )\n    }\n  }\n\n\n  //-------------------------------------------------------------------------------\n\n  createTab = ( tab ) => {\n\n    const { tabs }    = this.props\n    const { curTab }  = tabs.state\n\n    const title = (\n      <span>\n        { tab.name } &nbsp;\n        { tab.id === curTab &&\n          <FontAwesome name='times' style={{fontSize:'10px'}} onClick={ this.onRemoveTab }/>\n        }\n      </span>\n    )\n\n    return (\n      <Tab\n        key     = { `tab_${tab.id}` }\n        eventKey= { tab.id }\n        title   = { title }\n        mountOnEnter\n      >\n        <AcGrid tabId={tab.id} layout={tab.layout} />\n      </Tab>\n    )\n  }\n\n\n  //-------------------------------------------------------------------------------\n\n  render() {\n\n    const { tabs } = this.props\n    const { curTab }  = tabs.state\n\n    return (\n      <Tabs\n        id        = \"tabs\"\n        className = 'acTabs'\n        activeKey = {curTab}\n        onSelect  = { this.onSelectTab }\n      >\n        { _.values( tabs.byId ).map( this.createTab ) }\n        <Tab eventKey={-1} title=\"+\" />\n      </Tabs>\n    )\n  }\n}\n\nconst mapStateToProps = ( state, ownProps ) => {\n  return {\n    tabs: state.tabs\n  }\n}\n\nexport default connect( mapStateToProps )( AcTabs );\n\n","//-------------------------------------------------------------------------------\n\nimport React from 'react'\n\nimport {\n  Alert,\n  Modal,\n  Button\n} from 'react-bootstrap'\n\n\n//-------------------------------------------------------------------------------\n\nexport default class AcModalScreenshot extends React.Component {\n\n  constructor( props ) {\n    super( props )\n    this.state = {\n      loaded  : false,\n      error   : null,\n      data    : null\n    }\n  }\n\n  onSuccess = (e) => { this.setState({ loaded: true, error: null }) }\n  onError   = (e) => { this.setState({ loaded: false, error: \"Failed to load image\" }) }\n\n  render() {\n\n    const { appConfig, onCancel } = this.props\n\n    const src = appConfig.api + '/utils/screenshot'\n    \n    return (\n      <Modal\n        show={true}\n        animation={true}\n        onHide={onCancel}\n        dialogClassName='acModelScreenshot'\n      >\n          <Modal.Header closeButton>\n            <Modal.Title>Screenshot</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n\n            { !this.state.loaded && this.state.error === null &&\n              <Alert variant=\"info\">\n                <h4>Taking Screenshot</h4>\n                <p>Please wait ...</p>\n              </Alert>\n            }\n\n            { !this.state.loaded && this.state.error != null &&\n              <Alert variant=\"danger\">\n                <h4>Failed</h4>\n                <p>{ this.state.error }</p>\n              </Alert>\n            }\n\n            <center>\n              <img\n                alt='screenshot'\n                src={src}\n                onLoad={this.onSuccess}\n                onError={this.onError}\n              />\n            </center>\n\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"success\" onClick={onCancel}>Close</Button>\n          </Modal.Footer>          \n      </Modal>\n    )\n  }\n}\n\n","//-------------------------------------------------------------------------------\n\nimport React from 'react'\nimport { Modal, Button } from 'react-bootstrap'\n\n\n//-------------------------------------------------------------------------------\n\nexport default class AcModalConfirm extends React.Component {\n\n  render() {\n\n    const { dialog, onCancel } = this.props\n\n    const onOK = () => {\n      dialog.callback( dialog.data )\n      onCancel()\n    }\n  \n    return (\n      <Modal show={true} size='lg' onHide={onCancel}>\n          <Modal.Header closeButton>\n            <Modal.Title>{ dialog.title }</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <h4>{ dialog.question }</h4>\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"default\" onClick={ onCancel }>Cancel</Button>\n            <Button variant=\"danger\" onClick={ onOK }>Confirm</Button>\n          </Modal.Footer>          \n      </Modal>\n    )\n  }\n}\n","//-------------------------------------------------------------------------------\n\nimport React from 'react'\n\nimport {\n  Modal,\n  Button,\n  Form,\n  Col,\n  Row\n} from 'react-bootstrap'\n\n\n//-------------------------------------------------------------------------------\n\nexport default class AcModalAddTab extends React.Component {\n\n  constructor( props ) {\n    super( props )\n    this.state = {\n      name  : ''\n    }\n  }\n\n  onChangeName = (e) => { this.setState({ name: e.target.value }); }\n\n\n  //-------------------------------------------------------------------------------\n\n  render() {\n\n    const { dialog, onCancel } = this.props\n    \n    const onOK = (e) => {\n\n      e.preventDefault()\n\n      if( this.state.name !== '' ) {\n        dialog.callback( this.state )\n      }\n\n      this.setState({\n        name: ''\n      })\n\n      onCancel()\n    }\n        \n    return (\n      <Modal show={true} onHide={onCancel}>\n        <Modal.Header closeButton>\n          <Modal.Title>Create a New Tab</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Form onSubmit={onOK} >\n            <Form.Group as={Row} controlId=\"formName\">\n              <Form.Label column sm='2'>\n                Name\n              </Form.Label>\n              <Col sm={10}>\n                <Form.Control\n                  type=\"text\"\n                  value={this.state.name}\n                  onChange={this.onChangeName}\n                  autoFocus={true}\n                />\n              </Col>\n            </Form.Group>\n          </Form>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"default\" onClick={onCancel}>Cancel</Button>\n          <Button variant=\"success\" onClick={onOK}>Create Tab</Button>\n        </Modal.Footer>          \n      </Modal>\n    )\n  }\n}\n","//-------------------------------------------------------------------------------\n\nimport _ from 'lodash'\nimport React from 'react'\nimport { GithubPicker } from 'react-color'\nimport ItemTypes from '../../Utils'\n\nimport {\n  Modal,\n  Button,\n  Form,\n  Row,\n  Col,\n  InputGroup,\n} from 'react-bootstrap'\n\n\nconst initial_state = {\n  name:        '',\n  colour:      '#004dcf',\n  textColour:  'white',\n  showColours: false\n}\n\n//-------------------------------------------------------------------------------\n\nexport default class AcModalAddPanel extends React.Component {\n\n  constructor( props ) {\n    super( props )\n    this.state = {...initial_state}\n  }\n\n  onChangeName    = (e) => { this.setState({ name: e.target.value }); }\n  onChangeColour  = (c) => {\n    const text = c.hex in ItemTypes.DARK_COLOURS ? 'white' : 'black'\n    this.setState({ colour: c.hex, textColour: text, showColours: false })\n  }\n\n  onShowColours     = (e) => { this.setState({ showColours: !this.state.showColours }) }\n  \n\n  //-------------------------------------------------------------------------------\n\n  render() {\n\n    const { dialog, onCancel } = this.props\n    \n    const onOK = (e) => {\n\n      e.preventDefault()\n      \n      if( this.state.name !== '' ) {\n        const panel = _.omit( {...this.state}, 'showColours' )\n        dialog.callback( panel )\n      }\n\n      onCancel()\n    }\n\n    \n    return (\n      <Modal show={true} onHide={onCancel}>\n          <Modal.Header closeButton>\n            <Modal.Title>Add Panel</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n\n          <Form onSubmit={onOK}>\n\n            <Form.Group as={Row} controlId=\"formType\">\n              <Form.Label column sm='2'>\n                Name\n              </Form.Label>\n              <Col sm={10}>\n                <InputGroup>\n\n                  <InputGroup.Prepend>\n                    <InputGroup.Text\n                      style={{\n                        backgroundColor: this.state.colour,\n                      }}\n                      onClick={this.onShowColours}\n                    >\n                      &nbsp;\n                    </InputGroup.Text>\n                  </InputGroup.Prepend>\n\n                  <Form.Control\n                    type=\"text\"\n                    value={this.state.name}\n                    onChange={this.onChangeName}\n                    autoFocus={true}\n                  />\n                </InputGroup>\n              </Col>\n            </Form.Group>\n\n              { this.state.showColours && \n                <Form.Group>\n                  <Col sm={{span:10, offset:2}}>\n                    <GithubPicker width='215px' onChangeComplete={ this.onChangeColour }/>\n                  </Col>\n                </Form.Group>\n              }\n\n          </Form>\n\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"default\" onClick={onCancel}>Cancel</Button>\n            <Button variant=\"success\" onClick={onOK}>Create Panel</Button>\n          </Modal.Footer>          \n      </Modal>\n    )\n  }\n}\n","//-------------------------------------------------------------------------------\n\nimport _ from 'lodash'\nimport React from 'react'\nimport { GithubPicker } from 'react-color'\nimport ItemTypes from '../../Utils'\nimport { Options } from '../app/AcWidgets'\n\nimport {\n  Modal,\n  Button,\n  Form,\n  Col,\n  Row,\n  Dropdown,\n  DropdownButton,\n  InputGroup\n} from 'react-bootstrap'\n\n\nconst initialState = {\n  name:        'Widget Name',\n  query:       '/about',\n  style:       'Default',\n  colour:      '#004dcf',\n  textColour:  'white',\n  log:         true,\n  notify:      true,\n  type:        'Button',\n  options:    {},\n \n  showColours: false,\n}\n\n\n//-------------------------------------------------------------------------------\n\nexport default class AcModalAddWidget extends React.Component {\n\n  constructor( props ) {\n    super( props )\n    const { dialog } = props\n    this.state = { ...initialState, ...dialog.widget }\n  }\n\n  onChangeName      = (e) => this.setState( { name: e.target.value } )\n  onChangeQuery     = (e) => this.setState( { query: e.target.value } )\n  onChangeLog       = (e) => this.setState( { log: e.target.checked } )\n  onChangeNotify    = (e) => this.setState( { notify: e.target.checked } )\n  onShowColours     = (e) => this.setState( { showColours: !this.state.showColours } )\n  onChangeType      = (e) => this.setState( { type: e } )\n  \n  onChangeColour    = (c) => {\n    const text = c.hex in ItemTypes.DARK_COLOURS ? 'white' : 'black'\n    this.setState({ colour: c.hex, textColour: text, showColours: false })\n  }\n\n\n\n\n  //-------------------------------------------------------------------------------\n\n  onOK = (e) => {\n\n    const { dialog, onCancel } = this.props\n\n    e.preventDefault()\n\n    if( this.state.name !== '' ) {\n\n      let options = {}\n\n      if( this.refs != null && this.refs.options != null ) {\n        options = this.refs.options.state\n      }\n\n      const widget = _.omit( { ...this.state, options: options }, 'showColours' )\n      dialog.callback( widget )\n    }\n\n    onCancel()\n  }\n\n    \n  //-------------------------------------------------------------------------------\n\n  render() {\n\n    const { onCancel } = this.props\n\n    const options = Options[ this.state.type.toLowerCase() ]\n    const element = options && React.createElement( options, {\n      ref: 'options',\n      options: this.state.options\n    })\n\n    return (\n      <Modal show={true} onHide={onCancel} size=\"lg\">\n          <Modal.Header closeButton>\n            <Modal.Title>Add { this.state.type }</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n\n          <Form onSubmit={this.onOK}>\n\n            <Form.Group as={Row} controlId=\"formType\">\n              <Form.Label column sm='2'>\n                Name\n              </Form.Label>\n              <Col sm={10}>\n                <InputGroup>\n                  <InputGroup.Prepend style={{padding: '0px'}}>\n                    <div style={{\n                      backgroundColor: this.state.colour,\n                      width:           '25px',\n                      height:          '36px',\n                    }}\n                    onClick={this.onShowColours}\n                    >\n                      <span style={{backgroundColor: this.state.colour, height:'100%', width:'100%'}} />\n                    </div>\n                  </InputGroup.Prepend>                \n                  <Form.Control\n                    type=\"text\"\n                    value={this.state.name}\n                    onChange={this.onChangeName}\n                    autoFocus={true}\n                    />\n                  <DropdownButton id=\"formType\" title={this.state.type}>\n                    <Dropdown.Item key=\"1\" onSelect={()=>this.onChangeType('Button')}>Button</Dropdown.Item>\n                    <Dropdown.Item key=\"2\" onSelect={()=>this.onChangeType('Link')}>Link</Dropdown.Item>\n                    <Dropdown.Item key=\"3\" onSelect={()=>this.onChangeType('Table')}>Table</Dropdown.Item>\n                  </DropdownButton>\n                </InputGroup>\n              </Col>\n            </Form.Group>\n\n            { this.state.showColours && \n              <Form.Group>\n                <Col sm={{offset:2, span:10}}>\n                  <GithubPicker width='215px' onChangeComplete={ this.onChangeColour }/>\n                </Col>\n              </Form.Group>\n            }\n\n            <Form.Group as={Row}>\n              <Form.Label column sm='2'>\n                Query\n              </Form.Label>\n              <Col sm={10}>\n                <Form.Control type=\"text\" value={this.state.query} onChange={this.onChangeQuery}/>\n              </Col>\n            </Form.Group>\n\n            <Form.Group as={Row}>\n              <Form.Label column sm='2'>\n                Output\n              </Form.Label>\n              <Col sm={10}>\n                <Form.Check\n                  type='checkbox'\n                  label='Copy results to output window'\n                  checked={this.state.log}\n                  onChange={this.onChangeLog} />\n              </Col>\n            </Form.Group>\n\n            <Form.Group as={Row}>\n              <Col sm={{offset:2, span:10}}>\n                <Form.Check\n                  type='checkbox'\n                  label='Display successful notification toast message'\n                  checked={this.state.notify}\n                  onChange={this.onChangeNotify} \n                />\n              </Col>\n            </Form.Group>\n\n            {element}\n\n          </Form>\n\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"default\" onClick={this.props.onCancel}>Cancel</Button>\n            <Button variant=\"success\" onClick={this.onOK}>\n            { this.props.dialog.widget ? \"Update Widget\" : \"Create Widget\" }\n            </Button>\n          </Modal.Footer>          \n      </Modal>\n    )\n  }\n}\n","//-------------------------------------------------------------------------------\n\nimport React, {Fragment} from 'react'\nimport { connect } from 'react-redux'\n\nimport AcModalScreenshot from '../dialogs/AcModalScreenshot'\nimport AcModalConfirm from '../dialogs/AcModalConfirm'\nimport AcModalAddTab from '../dialogs/AcModalAddTab'\nimport AcModalAddPanel from '../dialogs/AcModalAddPanel'\nimport AcModalAddWidget from '../dialogs/AcModalAddWidget'\n\nimport { CancelDialog } from '../../actions/App'\n\nconst DialogComponents = {\n  'screenshot': AcModalScreenshot,\n  'confirm'   : AcModalConfirm,\n  'addTab'    : AcModalAddTab,\n  'addPanel'  : AcModalAddPanel,\n  'addWidget' : AcModalAddWidget,\n}\n\n//-------------------------------------------------------------------------------\n\nclass AcDialogs extends React.Component {\n\n  onCancel = () => {\n    this.props.dispatch( CancelDialog() )\n  }\n\n  render() {\n\n    const { dialog, config } = this.props.app\n\n    if( dialog === null || !(dialog.modal in DialogComponents) ) {\n      return null\n    }\n\n    const component = DialogComponents[ dialog.modal ]\n    const element = React.createElement( component, {\n      onCancel: this.onCancel,\n      dialog: dialog,\n      appConfig: config\n    })\n\n    return (\n      <Fragment>\n        {element}\n      </Fragment>\n    )\n  }\n}\n\n\n\nconst mapStateToProps = ( state, ownProps ) => {\n  return {\n    app: state.app\n  }\n}\n\nexport default connect( mapStateToProps )( AcDialogs );\n\n","//-------------------------------------------------------------------------------\n\nimport React from 'react'\nimport FontAwesome from 'react-fontawesome'\nimport Axios from 'axios'\n\nimport * as Connection from '../../actions/Connection'\nimport * as Log from '../../actions/Logging'\n\nimport _ from 'lodash'\n\nimport {\n  Form,\n  InputGroup,  \n  Badge\n} from 'react-bootstrap'\n\nimport { connect } from 'react-redux'\n\nconst EventListenerMode = { capture: true }\n\n\n//-------------------------------------------------------------------------------\n\nclass AcOutput extends React.Component {\n\n  constructor(...args) {\n    \n    super(...args)\n\n    this.state = {\n      locked: false,\n      query: ''\n    }\n\n    this.dragOrigin    = 0\n    this.height        = 0\n    this.dragTimestamp = 0\n  }\n\n\n  componentDidUpdate () {\n    if( !this.state.locked ) {\n      const el = this.refs.outputContent\n      el.scrollTop = el.scrollHeight\n    }\n  }\n\n  onLock = (e) => {\n    e.stopPropagation()\n    e.nativeEvent.stopImmediatePropagation()\n    this.setState({locked: !this.state.locked })\n  }\n\n  onClear = (e) => {\n    e.stopPropagation()\n    e.nativeEvent.stopImmediatePropagation()\n    this.props.dispatch( Log.Clear() )\n  }\n\n  onConnect = (e) => {\n    e.stopPropagation()\n    e.nativeEvent.stopImmediatePropagation()\n    this.props.dispatch( Connection.Connect() )\n  }\n\n  onDisconnect = (e) => {\n    e.stopPropagation()\n    e.nativeEvent.stopImmediatePropagation()\n    this.props.dispatch( Connection.Disconnect() )\n  }\n\n  onUpdateQuery = (e) => {\n    this.setState({\n      query: e.target.value.trim()\n    })\n  }\n\n  onKeyDown = (e) => {\n\n    if( e.key !== 'Enter' || !this.state.query ) {\n      return\n    }\n\n    const { dispatch, app } = this.props\n    const { api }           = app.config\n    const input             = this.state.query\n    const separator         = input.startsWith( '/' ) ? '': '/'\n    const url               = api + separator + input\n\n    Axios\n      .get  ( url )\n      .then ( (res) => dispatch( Log.Print( JSON.stringify( res.data, null, 2 ) ) ) )\n      .catch( (err) => dispatch( Log.Error( err.toString() ) ) )\n  }\n\n\n  //-------------------------------------------------------------------------------\n  // draggable height\n\n  onToggle = (e) => {\n    this.height = this.height > 10 ? 0 : 250\n    this.refs.output.style.height = this.height + 'px'\n  }\n\n  onMouseDown = (e) => {\n    document.body.style['pointer-events'] = 'none'\n    document.addEventListener( 'mouseup', this.onMouseUp, EventListenerMode )\n    document.addEventListener( 'mousemove', this.onMouseMove, EventListenerMode )\n    e.preventDefault()\n    e.stopPropagation()\n\n    this.dragOrigin    = e.screenY\n    this.dragTimestamp = Date.now()\n  }\n    \n  onMouseMove = (e) => {\n\n    e.stopPropagation()\n\n    const delta = this.dragOrigin - e.screenY\n    this.dragOrigin = e.screenY\n    this.height = Math.max( this.height + delta, 0 )\n\n    this.refs.output.style.height = this.height + 'px'\n  }\n\n  onMouseUp = (e) => {\n    document.body.style['pointer-events'] = 'auto'\n    document.removeEventListener( 'mouseup', this.onMouseUp, EventListenerMode )\n    document.removeEventListener( 'mousemove', this.onMouseMove, EventListenerMode )\n    e.stopPropagation()\n\n    if( Date.now() - this.dragTimestamp < 200 ) {\n      this.onToggle()\n    }\n  }\n\n  //-------------------------------------------------------------------------------\n  \n  render() {\n\n    const { output, app } = this.props\n    const isConnected = app.connected\n    \n\n    let contents = null\n\n    if( output.length > 0 ) {\n      contents = _.map( output, (o,i) =>  <pre key={i} className={'text-' + o.type}>[{o.timestamp}] { o.text }</pre> )\n    } else {\n      contents = \"No output\"\n    }    \n\n    return (\n\n      <div className='acOutput'>\n        <div className='acOutputTitle'>\n          <span style={{width: \"110px\"}}>\n            { isConnected ?\n              <Badge variant='success' onClick={this.onDisconnect}>\n                Connected\n              </Badge>\n            :\n              <Badge variant='success' onClick={this.onConnect}>\n                Not Connected\n              </Badge>\n            }\n          </span>\n          <span onMouseDown={this.onMouseDown} onClick={this.onToggle} style={{width:'100%', marginLeft: '0.5em'}}>\n            Output\n          </span>\n        \n          <div style={{width: '60px'}}>\n            <FontAwesome name='trash' onClick={this.onClear} />\n            &nbsp;\n            <FontAwesome\n              className={ this.state.locked ? 'text-danger' : 'text-info' }\n              name={ this.state.locked ? 'lock' : 'unlock' }\n              onClick={this.onLock}\n            />\n            &nbsp;          \n          </div>\n        </div>\n\n        <div ref='output' className='acOutputContainer' style={{height: this.height + 'px'}}>\n          <div ref='outputContent' className='acOutputContent'>\n            { contents }\n          </div>\n          <InputGroup className='acOutputInput'>\n            <InputGroup.Prepend>\n              <InputGroup.Text>Query</InputGroup.Text>\n            </InputGroup.Prepend>\n            <Form.Control\n              type=\"text\"\n              value={this.state.query}\n              onChange={this.onUpdateQuery}\n              onKeyDown={this.onKeyDown}\n              placeholder='q/scene/*.name'\n              ref='input'\n            />\n          </InputGroup>\n        </div>\n      </div>\n   )\n  }\n}\n\nconst mapStateToProps = ( state, ownProps ) => {\n  return {\n    app     : state.app,\n    output  : state.output\n  }\n}\n\nexport default connect( mapStateToProps )( AcOutput );\n","//-------------------------------------------------------------------------------\n\nlet server = document.location.host\n\nif ( process.env.NODE_ENV === 'development' ) {\n  server = server.replace( /:\\d+/, ':8342' )\n}\n\nconst initial_state = {\n  dialog      : null,\n  connected   : false,\n  config      : {\n    api       : document.location.protocol + '//' + server,\n    ws        : \"ws://\" + server + \"/ws\"\n  },\n}\n\n\n//-------------------------------------------------------------------------------\n\nexport default function App( state=initial_state, action ) {\n\n  switch( action.type ) {\n    case 'CONFIG_IMPORT':     return { ...state }\n    case 'APP_CONFIG':        return { ...state }\n    case 'CON_CONNECTED':     return { ...state, connected: action.payload }\n    case 'APP_DAILOG_SHOW':   return { ...state, dialog: action.payload }\n    case 'APP_DIALOG_CANCEL': return { ...state, dialog: null }\n    default: break;\n  }\n\n  return state\n}\n\n","//-------------------------------------------------------------------------------\n\nimport { combineReducers } from 'redux'\nimport _ from 'lodash'\n\n\n//-------------------------------------------------------------------------------\n\nfunction reduceById( state={}, action ) {\n\n  switch( action.type ) {\n\n    case 'CONFIG_IMPORT': {\n      return { ...action.payload.tabs.byId }\n    }\n    \n    case 'TAB_CREATE': {\n\n      const { payload } = action\n      const { id }      = payload\n      const entry       = { ...payload }\n\n      return { ...state, [id] : entry }\n    }\n\n    case 'TAB_REMOVE': {\n\n      const { payload } = action\n      const { id }      = payload\n\n      return _.omit( state, id )\n    }\n\n    case 'TAB_LAYOUT': {\n\n      const { payload }     = action\n      const { id, layout }  = payload\n\n      if( id in state ) {\n        const tab = {...state[id], layout: layout }\n        return { ...state, [id] : tab }\n      }\n\n      break;\n    }\n\n    default: {\n      break;\n    }\n  }\n\n  return state\n}\n\n\n//-------------------------------------------------------------------------------\n\nfunction reduceState( state={ curTab: 1 }, action ) {\n\n  switch( action.type ) {\n\n    case 'CONFIG_IMPORT': {\n      return { ...action.payload.tabs.state }\n    }\n\n    case 'TAB_CREATE': \n    case 'TAB_SELECT': {\n      const { id } = action.payload\n      return {...state, curTab: id }\n    }\n\n    case 'TAB_REMOVE': {\n      const { showTab } = action.payload\n      return {...state, curTab: showTab }\n    }\n\n    default: {\n      break;\n    }\n  }\n\n  return state\n}\n  \n\n//-------------------------------------------------------------------------------\n\nexport default combineReducers({\n  byId    : reduceById,\n  state   : reduceState\n})\n","//-------------------------------------------------------------------------------\n\nimport { combineReducers } from 'redux'\nimport _ from 'lodash'\n\n\n//-------------------------------------------------------------------------------\n\nfunction reduceById( state={}, action ) {\n\n  switch( action.type ) {\n\n    case 'CONFIG_IMPORT': {\n      return { ...action.payload.panels.byId }\n    }\n    \n\n    //-------------------------------------------------------------------------------\n\n    case 'PANEL_CREATE': {\n\n      const { payload } = action\n      const { id }      = payload\n      const panel       = { ...payload, widgets: [] }\n\n      return { ...state, [id] : panel }\n    }\n\n\n    case 'PANEL_REMOVE': {\n\n      const { payload } = action\n      const { id }      = payload\n\n      return _.omit( state, id )\n    }\n\n    case 'TAB_REMOVE': {\n\n      const { payload } = action\n      const { id }      = payload\n      \n      return _.omitBy( state, (t) => t.tab === id )\n    }\n\n\n    //-------------------------------------------------------------------------------\n\n    case 'WIDGET_CREATE': {\n\n      const widget = action.payload\n      const panelID = widget.panel\n      \n      if( panelID in state ) {\n\n        const panel = state[ panelID ]\n        const widgets = [ ...panel.widgets ]\n\n        if( ! _.find( widgets, (w) => w === widget.id ) ) {\n          widgets.push( widget.id )\n        }\n\n        const newPanel = { ...panel, widgets: widgets }\n  \n        return { ...state, [ panelID ]: newPanel }\n\n      } else {\n        console.warn( \"Can't find panel \" + widget.panel )\n      }\n\n      break\n    }\n\n\n    case 'WIDGET_REMOVE': {\n\n      const { id, panel } = action.payload\n\n      if( panel in state ) {\n\n        const oldPanel = state[ panel ]\n        const widgets = _.reject( oldPanel.widgets, (wid) => wid === id )\n\n        return { ...state, [ panel ]: { ...oldPanel, widgets: widgets } }\n\n     } else {\n        console.warn( \"Can't find panel \" + panel )\n        break\n      }\n\n      // return _.omit( state, id )\n    }\n\n    case 'WIDGET_MOVE': {\n\n      console.log( action.payload )\n\n      const { id, dragIndex, hoverIndex } = action.payload\n\n      const panel   = state[ id ]\n      const dragged = panel.widgets[ dragIndex ]\n\n      const widgets = [ ...panel.widgets.slice( 0, dragIndex ), ...panel.widgets.slice( dragIndex + 1 ) ]\n\n      widgets.splice( hoverIndex, 0, dragged )\n\n      return { ...state, [ id ]: { ...panel, widgets: widgets } }\n    }\n\n    default: {\n      break;\n    }\n          \n  }\n  \n  return state\n}\n\n\n//-------------------------------------------------------------------------------\n\n\nfunction reduceState( state={}, action ) {\n\n  switch( action.type ) {\n\n    case \"APP_PANEL_STATE\": {\n      return { ...state, ...action.payload }\n    }\n\n    default: {\n      break;\n    }\n  }\n\n  return state\n}\n\n\n//-------------------------------------------------------------------------------\n\nexport default combineReducers({\n  byId    : reduceById,\n  state   : reduceState\n})\n\n","//-------------------------------------------------------------------------------\n\nimport { combineReducers } from 'redux'\nimport _ from 'lodash'\n\n//-------------------------------------------------------------------------------\n\nfunction reduceById( state={}, action ) {\n\n  switch( action.type ) {\n    \n    case 'CONFIG_IMPORT': {\n      return { ...action.payload.widgets.byId }\n    }\n\n    case 'WIDGET_CREATE': {\n\n      const { payload } = action\n      const { id }      = payload\n      const widget      = { ...payload }\n\n      return { ...state, [id] : widget }\n    }\n\n    case 'WIDGET_REMOVE': {\n\n      const { payload } = action\n      const { id }      = payload\n\n      return _.omit( state, id )\n    }\n\n\n    case 'PANEL_REMOVE': {\n\n      const { payload } = action\n      const { id }      = payload\n      \n      return _.omitBy( state, (w) => w.panel === id )\n      \n    }\n    \n    case 'TAB_REMOVE': {\n\n      const { payload } = action\n      const { id }      = payload\n      \n      return _.omitBy( state, (w) => w.tab === id )\n      \n    }\n\n    default: {\n      return state\n    }\n  }\n}\n\n//-------------------------------------------------------------------------------\n\nexport default combineReducers({\n  byId    : reduceById\n})\n\n","//-------------------------------------------------------------------------------\n// websocket connection to game as redux middleware\n\nimport * as Log from '../../actions/Logging'\nimport * as Action from '../../actions/Connection'\n\n\n//-------------------------------------------------------------------------------\n\nclass Connection\n{\n  socket  = null\n  store   = null\n\n  constructor( store ) {\n    this.store = store\n  }\n\n  onOpen = () => { \n    const store = this.store\n    return () => store.dispatch( Action.SetState( true ) )\n  }\n\n  onClose = () => { \n    const store = this.store\n    return () => store.dispatch( Action.SetState( false ) )\n  }\n\n  onMessage = () => {\n    const store = this.store\n    return (e) => {\n      const msg = JSON.parse( e.data )\n      store.dispatch({\n        type    : \"SOCK_\" + msg.id.toUpperCase(),\n        payload : msg\n      })\n    }\n  }\n\n  onError = () => {\n    const store = this.store\n    return (e) => {\n      store.dispatch( Log.Error( \"Failed to connect to game\" ) )\n    }\n  }\n\n\n  connect() {\n\n    this.disconnect()\n\n    // get URL end-point\n\n    const { config } = this.store.getState().app\n\n    // create websocket\n   \n    this.socket           = new WebSocket( config.ws )\n    this.socket.onopen    = this.onOpen()\n    this.socket.onclose   = this.onClose()\n    this.socket.onerror   = this.onError()\n    this.socket.onmessage = this.onMessage()\n  }\n\n  disconnect() {\n    if( this.socket !== null ) {\n      this.socket.close()\n    }\n\n    this.socket = null\n  }\n\n  send( data ) {\n    this.socket.send( JSON.stringify( data ) )\n  }\n}\n\n\n//-------------------------------------------------------------------------------\n\nfunction ConnectionMiddleware() { \n\n  let gConnection = null\n\n  return store => next => action => {\n    \n    switch( action.type ) {\n\n      case 'CON_CONNECT':\n        if( gConnection === null ) {\n          gConnection = new Connection( store )\n        }\n        gConnection.connect()\n        break\n\n      case 'CON_DISCONNECT':\n        if( gConnection !== null ) {\n          gConnection.disconnect()\n        }\n        break\n\n      case 'CON_SEND':\n        if( gConnection !== null ) {\n          gConnection.send( action.payload )\n        }\n        break\n\n      default:\n        return next( action )\n    }\n  }\n}\n\n\n//-------------------------------------------------------------------------------\n\nexport default ConnectionMiddleware()\n\n","//-------------------------------------------------------------------------------\n\nimport { combineReducers, applyMiddleware, createStore } from 'redux'\nimport thunk from 'redux-thunk'\nimport { createLogger } from 'redux-logger'\n\nimport App from './reducers/App'\nimport Tabs from './reducers/Tabs'\nimport Panels from './reducers/Panels'\nimport Widgets from './reducers/Widgets'\nimport Output from './reducers/Output'\n\nimport AppMiddleware from './middleware/App'\nimport ConnectionMiddleware from './middleware/Connection'\n\n\n//-------------------------------------------------------------------------------\n\nconst reducers = {\n  app     : App,\n  tabs    : Tabs,\n  panels  : Panels,\n  widgets : Widgets,\n  output  : Output,\n}\n\nconst middleware = [\n  thunk,\n  AppMiddleware,\n  ConnectionMiddleware\n]\n\nif ( process.env.NODE_ENV === 'development' ) {\n  middleware.push( createLogger() )\n}\n\n//-------------------------------------------------------------------------------\n\nexport default createStore(\n  combineReducers( reducers ),\n  {},\n  applyMiddleware( ...middleware )\n)\n\n","//-------------------------------------------------------------------------------\n\nimport moment from 'moment'\n\nexport default function( state=[], action ) {\n\n  switch( action.type ) {\n\n    case 'LOG_CLEAR': {\n      return []\n    }\n    \n    case 'LOG': {\n\n      const { payload } = action\n\n      const log = {\n        ...payload,\n        timestamp : moment().format( 'HH:mm:ss.SS' )\n      }\n      \n      const output = state.slice()\n      output.push( log )\n\n      return output\n    }\n\n    default: {\n      break\n    }\n  } \n\n  return state\n}\n\n","//-------------------------------------------------------------------------------\n\nimport React from 'react'\nimport { Provider } from 'react-redux'\nimport { ToastContainer } from 'react-toastify'\n\nimport AcNavBar from './components/app/AcNavBar'\nimport AcTabs from './components/app/AcTabs'\nimport AcDialogs from './components/app/AcDialogs'\nimport AcOutput from './components/app/AcOutput'\n\nimport Store from './model/Store'\n\n//-------------------------------------------------------------------------------\n\nexport default class App extends React.Component {\n  render() {\n    return (\n      <Provider store={Store}>\n        <div>\n          <AcNavBar/>\n          <AcTabs/>\n          <AcOutput/>\n          <AcDialogs/>\n          <ToastContainer \n              position=\"bottom-right\"\n              autoClose={3000}\n              hideProgressBar={true}\n              newestOnTop={false}\n              closeOnClick\n              pauseOnHover\n          />      \n        </div>\n      </Provider>\n    );\n  }\n}\n\nStore.dispatch( { type: 'APP_LOAD' } )\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport 'bootstrap/dist/css/bootstrap.css'\nimport 'react-toastify/dist/ReactToastify.min.css'\nimport 'font-awesome/css/font-awesome.css'\nimport './index.css';\n\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","//-------------------------------------------------------------------------------\n// websocket connection\n\nexport function Connect() {\n  return {\n    type: \"CON_CONNECT\",\n  }\n}\n\nexport function Disconnect() {\n  return {\n    type: \"CON_DISCONNECT\",\n  }\n}\n\nexport function SetState( state ) {\n  return {\n    type    : \"CON_CONNECTED\",\n    payload : state\n  }\n}\n\nexport function Send( id, q ) {\n  return {\n    type    : \"CON_SEND\",\n    payload : {\n      id    : id,\n      q     : q\n    }\n  }\n}\n"],"sourceRoot":""}